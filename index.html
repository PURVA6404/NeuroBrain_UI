{% extends 'base.html' %}

{% block title %}NeuroBrain AI - Brain Tumor Detection{% endblock %}

{% block additional_css %}
<style>
    .hero-section {
        position: relative;
        padding: 4rem 0;
        background: linear-gradient(120deg, rgba(99, 102, 241, 0.08) 0%, rgba(79, 70, 229, 0.08) 100%);
        margin-bottom: 3rem;
        overflow: hidden;
        transition: var(--transition);
        width: 100%;
    }
    
    .hero-image {
        max-width: 100%;
        height: auto;
        border-radius: 0.75rem;
        box-shadow: var(--card-shadow);
        transition: var(--transition);
    }
    
    .hero-title {
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        transition: var(--transition);
    }
    
    .hero-subtitle {
        color: var(--text-secondary);
        margin-bottom: 2rem;
        font-size: 1.125rem;
        transition: var(--transition);
    }
    
    .feature-card {
        height: 100%;
        transition: var(--transition);
        background-color: var(--card-bg);
    }
    
    .feature-card:hover {
        transform: translateY(-5px);
    }
    
    .upload-section {
        background-color: var(--card-bg);
        padding: 2rem 0;
        margin-bottom: 3rem;
        transition: var(--transition);
        width: 100%;
    }
    
    .upload-container {
        background-image: url('https://www.radiologyinfo.org/gallery-items/images/brain-mri.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-color: rgba(0, 0, 0, 0.7);
        background-blend-mode: overlay;
        color: white;
        min-height: 400px;
        transition: var(--transition);
    }
    
    .upload-btn-primary {
        background-color: var(--primary-color);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        font-weight: 500;
        border-radius: 0.5rem;
        transition: var(--transition);
    }
    
    .upload-btn-primary:hover {
        background-color: var(--primary-dark);
        transform: translateY(-1px);
    }
    
    .tech-card {
        background-color: var(--card-bg);
        border-radius: 1rem;
        box-shadow: var(--card-shadow);
        padding: 2rem;
        height: 100%;
        transition: var(--transition);
    }
    
    .tech-card:hover {
        transform: translateY(-5px);
    }
    
    .tech-icon {
        width: 4rem;
        height: 4rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: rgba(99, 102, 241, 0.1);
        border-radius: 1rem;
        margin-bottom: 1.5rem;
        transition: var(--transition);
    }
    
    .tech-icon svg {
        width: 2rem;
        height: 2rem;
        color: var(--primary-color);
        transition: var(--transition);
    }
    
    .stat-card {
        background-color: var(--card-bg);
        border-radius: 1rem;
        padding: 1.5rem;
        box-shadow: var(--card-shadow);
        text-align: center;
        height: 100%;
        transition: var(--transition);
    }
    
    .stat-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.5rem;
        transition: var(--transition);
    }
    
    .stat-label {
        color: var(--text-secondary);
        font-weight: 500;
        transition: var(--transition);
    }
    
    /* Timeline Styles */
    .timeline {
        position: relative;
        padding: 2rem 0;
    }
    
    .timeline::before {
        content: '';
        position: absolute;
        width: 4px;
        background-color: rgba(99, 102, 241, 0.2);
        top: 0;
        bottom: 0;
        left: 50%;
        margin-left: -2px;
        transition: var(--transition);
    }
    
    .timeline-step {
        padding: 2rem;
        position: relative;
        background-color: var(--card-bg);
        border-radius: 1rem;
        box-shadow: var(--card-shadow);
        margin-bottom: 2rem;
        transition: var(--transition);
    }
    
    .timeline-icon {
        width: 3.5rem;
        height: 3.5rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin-bottom: 1rem;
        transition: var(--transition);
    }
    
    .timeline-arrow {
        position: absolute;
        width: 20px;
        height: 20px;
        background-color: var(--card-bg);
        top: 50%;
        transform: translateY(-50%) rotate(45deg);
        box-shadow: 2px -2px 6px rgba(0, 0, 0, 0.05);
        transition: var(--transition);
    }
    
    .col-md-6 .timeline-step .timeline-arrow {
        right: -10px;
    }
    
    .col-md-6.offset-md-6 .timeline-step .timeline-arrow {
        left: -10px;
    }

    /* Dark mode overrides */
    body.dark-mode .timeline::before {
        background-color: rgba(99, 102, 241, 0.3);
    }
    
    body.dark-mode .timeline-arrow {
        box-shadow: 2px -2px 6px rgba(0, 0, 0, 0.2);
    }
    
    body.dark-mode .list-group-item {
        background-color: var(--card-bg);
        color: var(--text-primary);
    }
    
    body.dark-mode .tech-icon {
        background-color: rgba(99, 102, 241, 0.2);
    }
    
    body.dark-mode .hero-section {
        background: linear-gradient(120deg, rgba(99, 102, 241, 0.1) 0%, rgba(79, 70, 229, 0.1) 100%);
    }
    
    @media (max-width: 767.98px) {
        .timeline::before {
            left: 2rem;
        }
        
        .col-md-6.offset-md-6 {
            margin-left: 0;
        }
        
        .timeline-step {
            margin-left: 3rem;
        }
        
        .timeline-arrow {
            left: -10px !important;
        }
    }
    
    .timeline-content {
        color: var(--text-primary);
        transition: var(--transition);
    }
    
    .timeline-content h5 {
        color: var(--text-primary);
        margin-bottom: 0.75rem;
        transition: var(--transition);
    }
    
    .timeline-content p {
        color: var(--text-secondary);
        margin-bottom: 0;
        transition: var(--transition);
    }
    
    .text-muted {
        color: var(--text-secondary) !important;
        transition: var(--transition);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-5 mb-lg-0">
                <h1 class="hero-title">Advanced Brain Tumor<br>Detection with AI</h1>
                <p class="hero-subtitle">Our AI-powered system uses deep learning to accurately detect and classify brain tumors from MRI scans, helping healthcare professionals make better decisions.</p>
                <a href="#upload" class="btn btn-primary btn-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload me-2" viewBox="0 0 16 16">
                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                        <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
                    </svg>
                    Upload MRI Scan
                </a>
            </div>
            <div class="col-lg-6">
                <img src="{{ url_for('static', filename='images/Brain.png') }}" alt="Brain MRI Scan" class="hero-image" style="width: 50%; height: 50%; float: right;">
            </div>
        </div>
    </div> 
</section>

<!-- Upload Section -->
<section id="upload" class="upload-section">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h2>Upload Your MRI Scan</h2>
                <p class="text-muted">Upload a brain MRI scan to detect and classify tumors using our AI model</p>
            </div>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data">
                    <div id="drop-area" class="upload-container">
                        <div class="text-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-cloud-arrow-up mb-3" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M7.646 5.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2z"/>
                                <path d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"/>
                            </svg>
                            <h4 class="mb-3">Drag & Drop MRI Image Here</h4>
                            <p class="mb-4">Or click to browse your files<br>Supported formats: JPG, JPEG, PNG</p>
                            <div>
                                <label for="file" class="upload-btn-primary">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-image me-2" viewBox="0 0 16 16">
                                        <path d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                                        <path d="M14 14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5V14zM4 1a1 1 0 0 0-1 1v10l2.224-2.224a.5.5 0 0 1 .61-.075L8 11l2.157-3.02a.5.5 0 0 1 .76-.063L13 10V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4z"/>
                                    </svg>
                                    Select File
                                </label>
                                <input type="file" name="file" id="file" class="d-none" accept=".jpg,.jpeg,.png" onchange="previewFile()">
                            </div>
                            <p id="file-name" class="mt-3"></p>
                            <div class="mt-4" style="display: none;">
                                <img id="preview-image" class="img-fluid" style="max-height: 200px; display: none;">
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary px-5">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search me-2" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                            </svg>
                            Detect Tumor
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Advanced Technology Section -->
<section class="tech-section py-5">
    <div class="container-fluid">
        <div class="row text-center mb-5">
            <div class="col-lg-8 mx-auto">
                <h2>Advanced Technology</h2>
                <p class="text-muted">Our system uses cutting-edge deep learning technology to analyze brain MRI scans with high precision.</p>
            </div>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="tech-card">
                    <div class="tech-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-cpu" viewBox="0 0 16 16">
                            <path d="M5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2A2.5 2.5 0 0 1 14 4.5h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14v1h1.5a.5.5 0 0 1 0 1H14a2.5 2.5 0 0 1-2.5 2.5v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14A2.5 2.5 0 0 1 2 11.5H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2v-1H.5a.5.5 0 0 1 0-1H2A2.5 2.5 0 0 1 4.5 2V.5A.5.5 0 0 1 5 0zm-.5 3A1.5 1.5 0 0 0 3 4.5v7A1.5 1.5 0 0 0 4.5 13h7a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 11.5 3h-7zM5 6.5A1.5 1.5 0 0 1 6.5 5h3A1.5 1.5 0 0 1 11 6.5v3A1.5 1.5 0 0 1 9.5 11h-3A1.5 1.5 0 0 1 5 9.5v-3zM6.5 6a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
                        </svg>
                    </div>
                    <h4>ResNet50 Neural Network</h4>
                    <p>Our system uses the ResNet50 deep learning architecture with transfer learning to analyze brain MRI scans. The architecture uses residual connections to train very deep neural networks effectively.</p>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="tech-card">
                    <div class="tech-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-diagram-3" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H14a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 2 7h5.5V6A1.5 1.5 0 0 1 6 4.5v-1zM8.5 5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1zM0 11.5A1.5 1.5 0 0 1 1.5 10h1A1.5 1.5 0 0 1 4 11.5v1A1.5 1.5 0 0 1 2.5 14h-1A1.5 1.5 0 0 1 0 12.5v-1zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zm4.5.5A1.5 1.5 0 0 1 7.5 10h1a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 8.5 14h-1A1.5 1.5 0 0 1 6 12.5v-1zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1zm4.5.5a1.5 1.5 0 0 1 1.5-1.5h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1a1.5 1.5 0 0 1-1.5-1.5v-1zm1.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1z"/>
                        </svg>
                    </div>
                    <h4>Tumor Classification</h4>
                    <p>Our system can accurately classify brain tumors into four categories:</p>
                    <ul class="list-unstyled mt-3">
                        <li class="mb-2">
                            <span class="badge bg-primary rounded-pill me-2">1</span>
                            Glioma Tumor
                        </li>
                        <li class="mb-2">
                            <span class="badge bg-info rounded-pill me-2">2</span>
                            Meningioma Tumor
                        </li>
                        <li class="mb-2">
                            <span class="badge bg-warning rounded-pill me-2">3</span>
                            Pituitary Tumor
                        </li>
                        <li>
                            <span class="badge bg-success rounded-pill me-2">4</span>
                            No Tumor
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
    // File upload preview
    const fileInput = document.getElementById('file');
    const fileName = document.getElementById('file-name');
    const dropArea = document.getElementById('drop-area');
    
    // Clear the default background when a file is selected
    fileInput.addEventListener('change', function() {
        if (this.files && this.files[0]) {
            fileName.textContent = this.files[0].name;
            
            // Override the default MRI background
            dropArea.style.backgroundImage = 'none';
            dropArea.style.backgroundColor = '#f8f9fc';
            dropArea.style.color = '#212529';
            
            // Preview image
            if (FileReader && this.files[0].type.match(/image.*/)) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    dropArea.style.backgroundImage = `url(${e.target.result})`;
                    dropArea.style.backgroundBlendMode = 'normal';
                    dropArea.style.backgroundSize = 'contain';
                    dropArea.style.backgroundRepeat = 'no-repeat';
                    dropArea.style.backgroundPosition = 'center';
                };
                reader.readAsDataURL(this.files[0]);
            }
        } else {
            fileName.textContent = "No file chosen";
            resetDropArea();
        }
    });
    
    // Reset drop area to default
    function resetDropArea() {
        dropArea.style.backgroundImage = 'url("https://www.radiologyinfo.org/gallery-items/images/brain-mri.jpg")';
        dropArea.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
        dropArea.style.backgroundBlendMode = 'overlay';
        dropArea.style.color = 'white';
    }
    
    // Drag and drop functionality
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, preventDefaults, false);
    });
    
    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }
    
    ['dragenter', 'dragover'].forEach(eventName => {
        dropArea.addEventListener(eventName, highlight, false);
    });
    
    ['dragleave', 'drop'].forEach(eventName => {
        dropArea.addEventListener(eventName, unhighlight, false);
    });
    
    function highlight() {
        dropArea.classList.add('bg-light');
    }
    
    function unhighlight() {
        dropArea.classList.remove('bg-light');
    }
    
    dropArea.addEventListener('drop', handleDrop, false);
    
    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        fileInput.files = files;
        
        // Trigger change event
        const event = new Event('change');
        fileInput.dispatchEvent(event);
    }
</script>
{% endblock %} 